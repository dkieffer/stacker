(this.webpackJsonpstacker=this.webpackJsonpstacker||[]).push([[0],[,,,,,,,,,function(t,e,a){t.exports=a(17)},,,,,function(t,e,a){},function(t,e,a){},function(t,e,a){},function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),c=a(4),o=a.n(c),i=(a(14),a(2)),l=a(5),r=a(6),u=a(1),v=a(8),h=a(7);a(15);var k=function(t){var e={top:t.top,left:t.left,height:t.height},a=t.id,s="stack";return t.selected===t.id&&(s+=" selected"),n.a.createElement("div",{id:"s"+t.id,className:s,style:e,onClick:function(){return t.function(a)}})};a(16);var m=function(t){console.log(t.zIndex);var e={top:t.yPos,left:t.xPos,zIndex:t.zIndex},a="token "+t.color;return t.selected===t.id&&(a+=" selected"),n.a.createElement("div",{className:a,style:e,id:"t"+t.id})};var g=function(t){var e="view";return"start"===t.activeView&&(e+=" active"),n.a.createElement("div",{className:e},n.a.createElement("div",null,n.a.createElement("h1",null,"Stacker"),n.a.createElement("button",{className:"button",onClick:function(){return t.initGame()}},"Play"),n.a.createElement("button",{className:"button exit-button top left",onClick:function(){return t.toggleSettings()}},"Settings")))};var d=function(t){var e="view";return"win"===t.activeView&&(e+=" active"),n.a.createElement("div",{className:e},n.a.createElement("div",{className:"center-view"},n.a.createElement("h1",null,"You Stacked"),n.a.createElement("button",{className:"button",onClick:function(){return t.startGame(!0)}},"Continue")))};var f=function(t){var e="view";"game"===t.activeView&&(e+=" active");for(var a=[],s=0;s<t.stacks.length;s++){var c="calc(50vw + "+t.stacks[s].xPos+"px)",o="calc("+t.stacks[s].yPos+"px + 50vh)";a.push(n.a.createElement(k,{top:o,left:c,height:"103px",id:s,key:s,function:t.manageStackAction,selected:t.selectedStack}))}for(var i=[],l=0;l<t.tokens.length;l++){var r="calc("+t.tokens[l].xPos+"px + 50vw)",u="calc("+t.tokens[l].yPos+"px + 50vh)",v=t.tokens[l].zIndex;i.push(n.a.createElement(m,{id:t.tokens[l].id,key:l,color:t.tokens[l].color,xPos:r,yPos:u,zIndex:v,selected:t.selectedToken}))}return n.a.createElement("div",{className:e},n.a.createElement("div",null,a,i),n.a.createElement("div",null,n.a.createElement("p",{className:"hud"},t.level),n.a.createElement("button",{className:"button exit-button",onClick:function(){return t.quitGame()}},"Exit"),n.a.createElement("p",{className:"counter"},t.moveCounter)))};var S=function(t){var e="view";return"settings"===t.activeView&&(e+=" active"),n.a.createElement("div",{className:e},n.a.createElement("div",{className:""},n.a.createElement("h1",null,"Settings"),n.a.createElement("p",null,"Level ",t.level,n.a.createElement("button",{className:"button",onClick:function(){return t.startOver()}},"Start Over")),n.a.createElement("button",{className:"button exit-button top left",onClick:function(){return t.quitGame()}},"Exit")))},p=function(t){Object(v.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).state={activeView:"start",tokens:[],stacks:[],game:{tokenSet:4,colorSet:2,stacks:3,stackCapacity:4,level:1},selectedStack:null,previouslySelectedStack:null,selectedToken:null,moveCounter:0,previousView:"start"},s.chooseRandomStack=s.chooseRandomStack.bind(Object(u.a)(s)),s.startGame=s.startGame.bind(Object(u.a)(s)),s.manageStackAction=s.manageStackAction.bind(Object(u.a)(s)),s.selectStack=s.selectStack.bind(Object(u.a)(s)),s.deselectStack=s.deselectStack.bind(Object(u.a)(s)),s.moveToken=s.moveToken.bind(Object(u.a)(s)),s.quitGame=s.quitGame.bind(Object(u.a)(s)),s.initGame=s.initGame.bind(Object(u.a)(s)),s.toggleSettings=s.toggleSettings.bind(Object(u.a)(s)),s.startOver=s.startOver.bind(Object(u.a)(s)),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.checkSavedLevel()}},{key:"checkSavedLevel",value:function(){localStorage.getItem("level")||localStorage.setItem("level",1);var t=localStorage.getItem("level");this.setState((function(e){return{game:Object(i.a)({},e.game,{level:t})}}))}},{key:"initGame",value:function(t){console.log("init game"),localStorage.getItem("level")||localStorage.setItem("level",1);var e=this.state.game.level;t&&e++,localStorage.setItem("level",e),this.setState((function(t){return{moveCounter:0,game:Object(i.a)({},t.game,{level:e})}}),(function(){this.setupGame()}))}},{key:"setupGame",value:function(){console.log("setup game");var t=Math.floor(.25*this.state.game.level)+3;console.log("stack quantity: "+t),this.setState((function(e){return{game:Object(i.a)({},e.game,{stacks:t,colorSet:t-1})}}),(function(){this.startGame()}))}},{key:"startGame",value:function(){console.log("start game");var t=["one","two","three","four","five","six","seven","eight","nine","ten"],e=this.positionStacks(this.state.game.stacks);console.log(e);for(var a=[],s=0;s<this.state.game.stacks;s++){var n={id:s,xPos:e[s].xPos,yPos:e[s].yPos,contents:[],selected:!1};a.push(n)}console.log(a);for(var c=[],o=0,i=0;i<this.state.game.tokenSet;i++)for(var l=0;l<this.state.game.colorSet;l++){var r=this.chooseRandomStack(a),u={id:o,color:t[l],stack:r,stackPos:a[r].contents.length,xPos:a[r].xPos,yPos:25*-a[r].contents.length+(a[r].yPos+103-25)};o++,a[r].contents.push(u.id),c.push(u)}console.log("ready to set state"),this.setState((function(t){return{activeView:"game",stacks:a,tokens:c}}),(function(){console.log(this.state.stacks)}))}},{key:"positionStacks",value:function(t){console.log("position stacks");var e=t,a=Math.ceil(e/5),s=Math.ceil(e/a),n=e%s;0===n&&(n=s);var c=[];if(e<5)c.push(e);else{c.push(n);for(var o=0;o<a-1;o++)c.push(s)}for(var i=[],l=(103*a+12*(a-1))/2,r=0;r<c.length;r++)for(var u=(48*c[r]+12*(c[r]-1))/2,v=0;v<c[r];v++){var h={xPos:48*v+12*v-u,yPos:103*r+12*r-l};i.push(h)}return i}},{key:"chooseRandomStack",value:function(t){console.log("choose random stack");for(var e=Math.floor(Math.random()*this.state.game.stacks);t[e].contents.length>this.state.game.stackCapacity-1;)e=Math.floor(Math.random()*this.state.game.stacks);return e}},{key:"manageStackAction",value:function(t){if(null===this.state.selectedStack){if(!(this.state.stacks[t].contents.length>0))return;this.setState((function(e){return{previouslySelectedStack:t}})),this.selectStack(t)}else if(this.state.selectedStack===t)this.deselectStack(t);else if(this.state.stacks[t].contents.length>=this.state.game.stackCapacity)this.deselectStack(this.state.previouslySelectedStack);else{var e=Array.from(this.state.stacks[this.state.previouslySelectedStack].contents);e.pop(),this.setState((function(t){return{stacks:t.stacks.map((function(a){return a.id===t.previouslySelectedStack?Object(i.a)({},a,{contents:e}):a}))}}),(function(){this.moveToken(t)}))}}},{key:"selectStack",value:function(t){var e;e=this.state.stacks[t].contents[this.state.stacks[t].contents.length-1],this.setState((function(a){return{selectedStack:t,selectedToken:e}}))}},{key:"deselectStack",value:function(t){this.setState((function(t){return{selectedStack:null,selectedToken:null}}))}},{key:"moveToken",value:function(t){var e=this.state.selectedToken,a=Array.from(this.state.stacks[t].contents);a.push(this.state.selectedToken),this.deselectStack(t),this.setState((function(s){return{tokens:s.tokens.map((function(a){return a.id===e?Object(i.a)({},a,{xPos:s.stacks[t].xPos,yPos:25*-s.stacks[t].contents.length+(s.stacks[t].yPos+103-25),zIndex:s.stacks[t].contents.length}):a})),stacks:s.stacks.map((function(e){return e.id===t?Object(i.a)({},e,{contents:a}):e})),moveCounter:s.moveCounter++}}),this.checkForWin)}},{key:"checkForWin",value:function(){console.log("CHECK FOR WIN");for(var t=0;t<this.state.stacks.length;t++){if(this.state.stacks[t].contents.length!==this.state.game.tokenSet&&0!==this.state.stacks[t].contents.length)return;for(var e=0;e<this.state.stacks[t].contents.length;e++)if(console.log("stack "+t+", token "+e),this.state.tokens[this.state.stacks[t].contents[e]].color!==this.state.tokens[this.state.stacks[t].contents[0]].color)return}this.endGame(),console.log("you win")}},{key:"endGame",value:function(){this.setState((function(t){return{activeView:"win"}}))}},{key:"quitGame",value:function(){this.setState((function(t){return{activeView:"start"}}))}},{key:"getState",value:function(){console.log(this.state)}},{key:"toggleSettings",value:function(){"settings"!==this.state.activeView?this.setState((function(t){return{activeView:"settings",previousView:t.previousView}})):this.setState((function(t){return{activeView:t.previousView,previousView:"settings"}}))}},{key:"startOver",value:function(){localStorage.setItem("level",1),this.setState((function(t){return{game:Object(i.a)({},t.game,{level:1})}}))}},{key:"render",value:function(){for(var t=[],e=0;e<this.state.stacks.length;e++){var a=this.state.stacks[e].xPos+"%",s=45*this.state.game.stackCapacity+"px";t.push(n.a.createElement(k,{top:"50%",left:a,height:s,id:e,function:this.manageStackAction,selected:this.state.selectedStack}))}for(var c=[],o=0;o<this.state.tokens.length;o++){var i=this.state.tokens[o].xPos+"%",l=this.state.tokens[o].yPos+"%";c.push(n.a.createElement(m,{id:this.state.tokens[o].id,color:this.state.tokens[o].color,xPos:i,yPos:l,selected:this.state.selectedToken}))}return n.a.createElement("div",{className:"App"},n.a.createElement(S,{activeView:this.state.activeView,quitGame:this.quitGame,level:this.state.game.level,startOver:this.startOver}),n.a.createElement(g,{initGame:this.initGame,activeView:this.state.activeView,level:this.state.game.level,toggleSettings:this.toggleSettings}),n.a.createElement(d,{startGame:this.initGame,activeView:this.state.activeView,level:this.state.game.level}),n.a.createElement(f,{stacks:this.state.stacks,game:this.state.game,selectStack:this.state.selectedStack,tokens:this.state.tokens,selectedToken:this.state.selectedToken,activeView:this.state.activeView,manageStackAction:this.manageStackAction,quitGame:this.quitGame,level:this.state.game.level,moveCounter:this.state.moveCounter}))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.155d426a.chunk.js.map